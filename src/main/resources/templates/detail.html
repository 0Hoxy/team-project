<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 상세 페이지</title>
    <link rel="stylesheet" href="/detail.css">
</head>
<body>
<div class="container">
    <div class="product-image">
        <img th:src="@{${product.productImagePath}}" alt="상품 이미지">
    </div>
    <div class="product-details">
        <h1 th:text="${product.productName}">상품 이름</h1>
        <p class="price" th:text="${product.productPrice} + '원'">가격</p>
        <p class="description" th:text="${product.productContent}">상세 설명</p>

        <div class="options">
            <h2>옵션</h2>
            <div th:each="option : ${product.options}">
                <p th:text="${option.optionName} + ' - ' + ${option.optionValue}"></p>
            </div>
        </div>

        <div class="benefits">
            <h2>혜택</h2>
            <ul>
                <li>최대 적립 포인트: 800원</li>
                <li>포인트 더 받는 방법: 최대 260원</li>
            </ul>
        </div>
        <div class="delivery-info">
            <h2>배송 정보</h2>
            <p>오늘 출발 14:00 마감 (지금 주문 시)</p>
            <p>택배비: 3,500원 (CJ 대한통운)</p>
        </div>
    </div>
        <div class="actions">
                <!-- 장바구니에 추가하는 폼 -->
                <form th:object="${product}" th:action="@{/cart/add/{userNo}(userNo=${userNo})}" method="post" >
<!--                    <input type="hidden" th:name="userNo" th:value="${userNo}">-->
                    <input type="hidden" th:name="productNo" th:field="*{productNo}">
                    <input type="hidden" th:name="productName" th:field="*{productName}">
                    <input type="hidden" th:name="productPrice" th:field="*{productPrice}">
<!--                    <input type="hidden" th:name="options" th:field="*{options}">-->
                    <button type="submit">Add to Cart</button>
                </form>
<!--                <form th:action="@{/cart/add/{userNo}(userNo=${userNo})}" method="post">-->
<!--                    <input type="hidden" name="productName" id="hiddenProductName" th:value="${product.productName}">-->
<!--                    <input type="hidden" name="productPrice" id="hiddenProductPrice" th:value="${product.productPrice}">-->
<!--                    <input type="hidden" name="options" id="hiddenOptions" th:value="${#strings.listJoin(product.options, ',')}">-->
<!--                    <button type="submit">Add to Cart</button>-->
<!--                </form>-->
        </div>


    <script>
        function submitCartForm() {
            const options = [...document.querySelectorAll('.options p')].map(option => option.textContent).join(', ');
            document.getElementById('hiddenOptions').value = options;
            document.getElementById('hiddenProductName').value = document.querySelector('.product-details h1').textContent;
            console.log('Product Name:', document.getElementById('hiddenProductName').value); // 디버깅 로그
            document.forms[0].submit();
        }
    </script>
</div>
</div>
</body>
</html>